<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="江湖の林九">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="江湖の林九">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Leo Lin">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>江湖の林九</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">江湖の林九</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">相逢何必曾相识！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/01/Linux%20%E7%A3%81%E7%9B%98%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B%EF%BC%9Adf%E3%80%81du%E3%80%81hdparm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/01/Linux%20%E7%A3%81%E7%9B%98%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B%EF%BC%9Adf%E3%80%81du%E3%80%81hdparm/" class="post-title-link" itemprop="url">Linux 磁盘相关命令简介：df、du、hdparm</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-01 12:00:00" itemprop="dateCreated datePublished" datetime="2020-05-01T12:00:00+08:00">2020-05-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-06 20:56:20" itemprop="dateModified" datetime="2020-05-06T20:56:20+08:00">2020-05-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="检查文件系统的磁盘受用情况：df"><a href="#检查文件系统的磁盘受用情况：df" class="headerlink" title="检查文件系统的磁盘受用情况：df"></a>检查文件系统的磁盘受用情况：df</h2><p>-a 显示所有文件系统的磁盘使用情况<br>-k 以k字节为单位显示。<br>-m 以M字节为单位显示。<br>-T 显示文件系统类型<br>-h 以K、M、G为单位显示，换算单位为1024<br>-h 以K、M、G为单位显示，换算单位为1000<br>例：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>df -TH</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件系统       <span class="number">1</span>K-blocks     已用     可用 已用% 挂载点</span><br><span class="line">/dev/sda8      <span class="number">100658932</span> <span class="number">11934424</span> <span class="number">83588212</span>   <span class="number">13</span>% /</span><br><span class="line">none                   <span class="number">4</span>        <span class="number">0</span>        <span class="number">4</span>    <span class="number">0</span>% /sys/fs/cgroup</span><br><span class="line">udev             <span class="number">2026148</span>        <span class="number">4</span>  <span class="number">2026144</span>    <span class="number">1</span>% /dev</span><br><span class="line">tmpfs             <span class="number">407168</span>     <span class="number">1132</span>   <span class="number">406036</span>    <span class="number">1</span>% /run</span><br><span class="line">none                <span class="number">5120</span>        <span class="number">0</span>     <span class="number">5120</span>    <span class="number">0</span>% /run/lock</span><br><span class="line">none             <span class="number">2035828</span>     <span class="number">2528</span>  <span class="number">2033300</span>    <span class="number">1</span>% /run/shm</span><br><span class="line">none              <span class="number">102400</span>       <span class="number">24</span>   <span class="number">102376</span>    <span class="number">1</span>% /run/user</span><br></pre></td></tr></table></figure>

<h2 id="统计目录或者文件所占磁盘空间大小：du"><a href="#统计目录或者文件所占磁盘空间大小：du" class="headerlink" title="统计目录或者文件所占磁盘空间大小：du"></a>统计目录或者文件所占磁盘空间大小：du</h2><p>-a 显示所有指定目录<br>-b 以byte为单位显示<br>-m 以MB为单位显示<br>-s 仅显示总计，即当前目录或者文件实际所占用的空间<br>-h 以 K、M、G 为单位显示、提高可读性<br>例：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>du -hs temp 图片 下载 音乐 桌面</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.6</span>G	temp</span><br><span class="line"><span class="number">980</span>K	图片</span><br><span class="line"><span class="number">764</span>M	下载</span><br><span class="line"><span class="number">75</span>M	音乐</span><br><span class="line"><span class="number">80</span>K	桌面</span><br></pre></td></tr></table></figure>

<h2 id="磁盘维护：hdparm"><a href="#磁盘维护：hdparm" class="headerlink" title="磁盘维护：hdparm"></a>磁盘维护：hdparm</h2><p>-a&lt;快取分区&gt; 设定读取文件时，预先存入块区的分区数，若不加上&lt;快取分区&gt;选项，则显示目前的设定。<br>-A&lt;0或1&gt; 启动或关闭读取文件时的快取功能。<br>-c&lt;I/O模式&gt; 设定IDE32位I/O模式。<br>-C 检测IDE硬盘的电源管理模式。<br>-d&lt;0或1&gt; 设定磁盘的DMA模式。<br>-f 将内存缓冲区的数据写入硬盘，并清楚缓冲区。<br>-g 显示硬盘的磁轨，磁头，磁区等参数。<br>-h 显示帮助。<br>-i 显示硬盘的硬件规格信息，这些信息是在开机时由硬盘本身所提供。<br>-I 直接读取硬盘所提供的硬件规格信息。<br>-k&lt;0或1&gt; 重设硬盘时，保留-dmu参数的设定。<br>-K&lt;0或1&gt; 重设硬盘时，保留-APSWXZ参数的设定。<br>-m&lt;磁区数&gt; 设定硬盘多重分区存取的分区数。<br>-n&lt;0或1&gt; 忽略硬盘写入时所发生的错误。<br>-p 设定硬盘的PIO模式。<br>-P&lt;磁区数&gt; 设定硬盘内部快取的分区数。<br>-q 在执行后续的参数时，不在屏幕上显示任何信息。<br>-r&lt;0或1&gt; 设定硬盘的读写模式。<br>-S&lt;时间&gt; 设定硬盘进入省电模式前的等待时间。<br>-t 评估硬盘的读取效率。<br>-T 评估硬盘快取的读取效率。<br>-u&lt;0或1&gt; 在硬盘存取时，允许其他中断要求同时执行。<br>-v 显示硬盘的相关设定。<br>-W&lt;0或1&gt; 设定硬盘的写入快取。<br>-X&lt;传输模式&gt; 设定硬盘的传输模式。<br>-y 使IDE硬盘进入省电模式。<br>-Y 使IDE硬盘进入睡眠模式。<br>-Z 关闭某些Seagate硬盘的自动省电功能。<br>例：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo hdparm -T <span class="regexp">/dev/</span>sda8</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/dev/sda8:</span></span><br><span class="line"> <span class="attr">Timing cached reads:</span>   <span class="number">8466 </span><span class="string">MB</span> <span class="string">in</span>  <span class="number">2.00</span> <span class="string">seconds</span> <span class="string">=</span> <span class="number">4236.29 </span><span class="string">MB/sec</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/01/Mysql%E5%AE%89%E8%A3%85%E5%9F%BA%E4%BA%8ECentos7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/01/Mysql%E5%AE%89%E8%A3%85%E5%9F%BA%E4%BA%8ECentos7/" class="post-title-link" itemprop="url">Mysql安装基于Centos7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-01 10:00:00" itemprop="dateCreated datePublished" datetime="2020-05-01T10:00:00+08:00">2020-05-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-20 15:06:04" itemprop="dateModified" datetime="2020-05-20T15:06:04+08:00">2020-05-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>1、准备:安装MySQL Yum Repository，下载地址<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/repo/yum/">https://dev.mysql.com/downloads/repo/yum/</a><br>2、查看当前Linux(red hat)版本号:cat /proc/version<br>3、查看CentOs版本号: cat /etc/redhat-release<br>4、glibc升级:yum update glibc</p>
<h2 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h2><p>1、新开的云服务器，需要检测系统是否自带安装mysql</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">list</span> installed | <span class="keyword">grep</span> mysql</span><br></pre></td></tr></table></figure>
<p>2、如果发现有系统自带mysql，果断这么干</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">yum</span> -y remove mysql-libs.x<span class="number">86</span>_<span class="number">64</span></span><br></pre></td></tr></table></figure>
<p>3、接着执行这句，这个rpm还不是mysql的安装文件，只是两个yum源文件，执行后，在/etc/yum.repos.d/ 目录下多出mysql-community-source.repo和mysql-community.repo</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -ivh mysql-community-release-el<span class="number">6</span>-<span class="number">5</span>.noarch.rpm</span><br></pre></td></tr></table></figure>
<p>4、查看是否已经有mysql可安装文件</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#yum repolist <span class="literal">all</span> | grep mysql</span><br></pre></td></tr></table></figure>
<p>5、选择要安装版本，比如mysql 5.7，修改/etc/yum.repos.d/mysql-community.repo文件，设置mysql 5.7下的enabled=1</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim</span> /etc/yum.repos.d/mysql-community.repo(装哪个版本启用哪个,例:mysql<span class="number">5</span>.<span class="number">7</span>--enable=<span class="number">1</span>,其他设置成<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>6、再次查看可安装的版本</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist enabled <span class="string">| grep mysql</span></span><br></pre></td></tr></table></figure>
<p>7、安装过程可能出现镜像服务器连接失败, 重新执行安装命令即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> mysql-community-<span class="keyword">server</span></span><br></pre></td></tr></table></figure>
<p>8、查看安装版本以及是否安装成功</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">list</span> installed | <span class="keyword">grep</span> mysql</span><br></pre></td></tr></table></figure>

<h2 id="启动配置"><a href="#启动配置" class="headerlink" title="启动配置"></a>启动配置</h2><p>1、修改mysql的配置文件（默认为/etc/my.cnf），在[mysqld]下添加一行 skip-grant-tables(跳过权限验证)<br>2、启动mysql: systemctl start mysqld<br>3、查看mysql版本: mysql -V<br>4、登录mysql: mysql<br>5、修改root密码: </p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql 5.7 user表里的password字段改成了authentication_string,antspeed为本人所设密码</span></span><br><span class="line">update mysql.user <span class="builtin-name">set</span> authentication_string = password(<span class="string">&#x27;antspeed&#x27;</span>) where<span class="built_in"> user </span>= <span class="string">&#x27;root&#x27;</span><span class="keyword">and</span> host = <span class="string">&#x27;%&#x27;</span>; --修改对应的用户远程访问权限下的密码 mysql 5.7</span><br><span class="line">update mysql.user <span class="builtin-name">set</span> authentication_string = password(<span class="string">&#x27;antspeed&#x27;</span>) where<span class="built_in"> user </span>= <span class="string">&#x27;root&#x27;</span>; -- 修改指定用户下所有访问路径的密码 mysql 5.7</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">推荐方式：</span><br><span class="line">alter<span class="built_in"> user </span><span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;antspeed&#x27;</span>;</span><br><span class="line"><span class="builtin-name">ERROR</span> 1819 (HY000): Your password does <span class="keyword">not</span> satisfy the current<span class="built_in"> policy </span>requirements 出现如上错误，是因为密码太简单了。</span><br></pre></td></tr></table></figure>
<p>6、编辑/etc/my.cnf 将[mysqld]下的skip-grant-tables 调整为：<br>    # skip-grant-tables<br>    添加一行（mysql数据库忽略表名大小写）：<br>    lower_case_table_names=1<br>7、重启mysql: systemctl restart mysqld</p>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>1、创建用户<br>新创建的用户，默认情况下是没有任何权限的。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create<span class="built_in"> user </span><span class="string">&#x27;ant1@localhost&#x27;</span> identified by <span class="string">&#x27;Bnm,./321&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建可远程连接的用户</span></span><br><span class="line">create<span class="built_in"> user </span><span class="string">&#x27;ant1&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;Bnm,./321&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>2、分配权限<br>格式：grant 权限 on 数据库.* to 用户名@登录主机 identified by “密码”;　<br>all privileges：表示将所有权限授予给用户。也可指定具体的权限，如：SELECT、CREATE、DROP等。<br>on：表示这些权限对哪些数据库和表生效，格式：数据库名.表名，这里写“*”表示所有数据库，所有表。如果我要指定将权限应用到test库的user表中，可以这么写：test.user<br>to：将权限授予哪个用户。格式：”用户名”@”登录IP或域名”。%表示没有限制，在任何主机都可以登录。比如：”yangxin”@”192.168.0.%”，表示yangxin这个用户只能在192.168.0IP段登录<br>identified by：指定用户的登录密码<br>with grant option：表示允许用户将自己的权限授权给其它用户</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">insert</span>,<span class="keyword">update</span>,<span class="keyword">create</span> <span class="keyword">on</span> antspeed.* <span class="keyword">to</span> pig@&quot;%&quot; identified <span class="keyword">by</span> <span class="string">&#x27;Antspeed1/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 带有<span class="keyword">WITH</span> <span class="keyword">ADMIN</span> <span class="keyword">OPTION</span>的权限授予方式，可传递授权。</span><br><span class="line">mysql&gt;  <span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.*(数据库) <span class="keyword">TO</span> 用户@&quot;特定ip&quot;（示例：root@%） IDENTIFIED <span class="keyword">BY</span> &quot;youpassword&quot; <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br><span class="line">mysql&gt;  flush <span class="keyword">privileges</span>;</span><br><span class="line">mysql&gt;  <span class="keyword">exit</span>;</span><br></pre></td></tr></table></figure>
<p>3、权限查看</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>(); <span class="comment"># 查看当前用户 如&#x27;pig&#x27;@&#x27;%&#x27;</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">grants</span> <span class="keyword">for</span> <span class="string">&#x27;pig&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>4、用户权限列表</p>
<table>
<thead>
<tr>
<th>Privilege</th>
<th>Grant Table Column</th>
<th>Context</th>
</tr>
</thead>
<tbody><tr>
<td>ALL [PRIVILEGES]</td>
<td>Synonym for “all privileges”</td>
<td>Server administration</td>
</tr>
<tr>
<td>ALTER</td>
<td>Alter_priv</td>
<td>Tables</td>
</tr>
<tr>
<td>ALTER ROUTINE</td>
<td>Alter_routine_priv</td>
<td>Stored routines</td>
</tr>
<tr>
<td>CREATE</td>
<td>Create_priv</td>
<td>Databases, tables, or indexes</td>
</tr>
<tr>
<td>CREATE ROUTINE</td>
<td>Create_routine_priv</td>
<td>Stored routines</td>
</tr>
<tr>
<td>CREATE TABLESPACE</td>
<td>Create_tablespace_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>CREATE TEMPORARY TABLES</td>
<td>Create_tmp_table_priv</td>
<td>Tables</td>
</tr>
<tr>
<td>CREATE USER</td>
<td>Create_user_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>CREATE VIEW</td>
<td>Create_view_priv</td>
<td>Views</td>
</tr>
<tr>
<td>DELETE</td>
<td>Delete_priv</td>
<td>Tables</td>
</tr>
<tr>
<td>DROP</td>
<td>Drop_priv</td>
<td>Databases, tables, or views</td>
</tr>
<tr>
<td>EVENT</td>
<td>Event_priv</td>
<td>Databases</td>
</tr>
<tr>
<td>EXECUTE</td>
<td>Execute_priv</td>
<td>Stored routines</td>
</tr>
<tr>
<td>FILE</td>
<td>File_priv</td>
<td>File access on server host</td>
</tr>
<tr>
<td>GRANT OPTION</td>
<td>Grant_priv</td>
<td>Databases, tables, or stored routines</td>
</tr>
<tr>
<td>INDEX</td>
<td>Index_priv</td>
<td>Tables</td>
</tr>
<tr>
<td>INSERT</td>
<td>Insert_priv</td>
<td>Tables or columns</td>
</tr>
<tr>
<td>LOCK TABLES</td>
<td>Lock_tables_priv</td>
<td>Databases</td>
</tr>
<tr>
<td>PROCESS</td>
<td>Process_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>PROXY</td>
<td>See proxies_priv table</td>
<td>Server administration</td>
</tr>
<tr>
<td>REFERENCES</td>
<td>References_priv</td>
<td>Databases or tables</td>
</tr>
<tr>
<td>RELOAD</td>
<td>Reload_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>REPLICATION CLIENT</td>
<td>Repl_client_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>REPLICATION SLAVE</td>
<td>Repl_slave_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>SELECT</td>
<td>Select_priv</td>
<td>Tables or columns</td>
</tr>
<tr>
<td>SHOW DATABASES</td>
<td>Show_db_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>SHOW VIEW</td>
<td>Show_view_priv</td>
<td>Views</td>
</tr>
<tr>
<td>SHUTDOWN</td>
<td>Shutdown_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>SUPER</td>
<td>Super_priv</td>
<td>Server administration</td>
</tr>
<tr>
<td>TRIGGER</td>
<td>Trigger_priv</td>
<td>Tables</td>
</tr>
<tr>
<td>UPDATE</td>
<td>Update_priv</td>
<td>Tables or columns</td>
</tr>
<tr>
<td>USAGE</td>
<td>Synonym for “no privileges”</td>
<td>Server administration</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/Gitlab%20%E7%A7%81%E6%9C%8D%E5%9F%BA%E4%BA%8Ecentos7%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/Gitlab%20%E7%A7%81%E6%9C%8D%E5%9F%BA%E4%BA%8Ecentos7%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">Gitlab私服基于centos7搭建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-18 09:00:00" itemprop="dateCreated datePublished" datetime="2020-03-18T09:00:00+08:00">2020-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-04 23:54:36" itemprop="dateModified" datetime="2020-07-04T23:54:36+08:00">2020-07-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>腾讯云服务器：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">操作系统	CentOS <span class="number">7.6</span> <span class="number">64</span>位</span><br><span class="line">CPU	<span class="number">1</span>核</span><br><span class="line">内存	<span class="number">2</span>GB</span><br><span class="line">公网带宽	<span class="number">1</span>Mbps</span><br></pre></td></tr></table></figure>
<p>gitlab安装包:<br><a target="_blank" rel="noopener" href="https://mirror.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/">https://mirror.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/</a></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>1、安装基础依赖</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装技术依赖</span></span><br><span class="line">sudo yum <span class="keyword">install</span> -y curl policycoreutils-python openssh-<span class="keyword">server</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动ssh服务&amp;设置为开机启动</span></span><br><span class="line">sudo systemctl <span class="keyword">enable</span> sshd</span><br><span class="line">sudo systemctl <span class="keyword">start</span> sshd</span><br></pre></td></tr></table></figure>

<p>2、配置邮件服务器<br>详见Google【Gitlab配置SMTP方式发送邮件】</p>
<p>3、安装GitLab社区版</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -ivh gitlab-ce-<span class="number">10</span>.<span class="number">0</span>.<span class="number">0</span>-ce.<span class="number">0</span>.el<span class="number">7</span>.x<span class="number">86</span>_<span class="number">64</span>.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改配置文件</span></span><br><span class="line"><span class="attribute">sudo</span> vi /etc/gitlab/gitlab.rb</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置首页地址（大约在第15行）</span></span><br><span class="line"><span class="attribute">external_url</span> &#x27;http://localhost:<span class="number">8888</span>&#x27;</span><br></pre></td></tr></table></figure>

<p>4、启动并访问GitLab</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 初始化gitlab</span></span><br><span class="line">gitlab-ctl reconfigure</span><br><span class="line"></span><br><span class="line"><span class="meta"># 停止命令：</span></span><br><span class="line">gitlab-ctl stop</span><br><span class="line"></span><br><span class="line"><span class="meta"># 重启命令：</span></span><br><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure>

<p>5、目录结构</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/opt/gi</span>tlab/ 　　<span class="comment">## 主目录 </span></span><br><span class="line"><span class="regexp">/etc/gi</span>tlab/ 　　<span class="comment">## 放置配置文件 </span></span><br><span class="line"><span class="regexp">/var/</span>opt<span class="regexp">/gitlab/</span> 　　<span class="comment">## 各个组件 </span></span><br><span class="line"><span class="regexp">/var/</span>log<span class="regexp">/gitlab/</span> 　　<span class="comment">## 放置日志文件</span></span><br><span class="line"><span class="regexp">/var/</span>opt<span class="regexp">/gitlab/gi</span>t-data/repositories 　　<span class="comment">##数据库的地址　　</span></span><br><span class="line"><span class="regexp">/var/</span>opt<span class="regexp">/gitlab/</span>postgresql/data 　　<span class="comment">#gitlab组和项目的地址</span></span><br></pre></td></tr></table></figure>

<h2 id="问题处理"><a href="#问题处理" class="headerlink" title="问题处理"></a>问题处理</h2><p>注意：启动后访问若出现502，可能是内存的原因，Gitlab非常消耗内存（本例内存2g）<br><a target="_blank" rel="noopener" href="https://fishmoon.xyz/2020/03/17/Linux%E6%96%B0%E5%BB%BA%E5%92%8C%E5%A2%9E%E5%8A%A0swap%E5%88%86%E5%8C%BA/">解决方案</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/17/Linux%20%E6%96%B0%E5%BB%BA%E5%92%8C%E5%A2%9E%E5%8A%A0swap%E5%88%86%E5%8C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/17/Linux%20%E6%96%B0%E5%BB%BA%E5%92%8C%E5%A2%9E%E5%8A%A0swap%E5%88%86%E5%8C%BA/" class="post-title-link" itemprop="url">Linux新建和增加swap分区</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-17 10:00:00" itemprop="dateCreated datePublished" datetime="2020-03-17T10:00:00+08:00">2020-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-23 15:40:31" itemprop="dateModified" datetime="2020-04-23T15:40:31+08:00">2020-04-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>swap分区在系统物理内存不够用的时候，把物理内存中的一部分空间释放出来，以供当前运行的程序使用。<br>被释放的空间来自一些很长时间无操作的程序，这些被释放的空间被临时保存到swap分区中，等到那些程序要运行时，再从swap分区中恢复保存的数据到内存中。</p>
<h2 id="文件作为swap分区"><a href="#文件作为swap分区" class="headerlink" title="文件作为swap分区"></a>文件作为swap分区</h2><p>1、查看当前系统swap分区</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/proc/</span>swaps</span><br><span class="line">或</span><br><span class="line">free -m</span><br></pre></td></tr></table></figure>
<p>2、创建要作为swap分区的文件<br>bs*count=文件大小，如下即是4GB</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="attribute">if</span>=/dev/zero <span class="attribute">of</span>=/mnt/swap <span class="attribute">bs</span>=512 <span class="attribute">count</span>=8388616</span><br></pre></td></tr></table></figure>
<p>3、将新建的文件做成swap分区</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap <span class="regexp">/data/</span>swap</span><br></pre></td></tr></table></figure>
<p>4、查看内核参数</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vm.swappiness中的数值是否为<span class="number">0</span>，如果为<span class="number">0</span>则根据实际需要调整成<span class="number">60</span></span><br><span class="line">查看参数：cat /proc/sys/vm/swappiness</span><br><span class="line">设置参数：sysctl -w vm.swappiness=<span class="number">60</span></span><br></pre></td></tr></table></figure>
<p>5、启用 swap 分区</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapon <span class="regexp">/data/</span>swap</span><br><span class="line">echo “<span class="regexp">/data/</span>swap swap swap defaults <span class="number">0</span> <span class="number">0</span>” &gt;&gt; <span class="regexp">/etc/</span>fstab</span><br></pre></td></tr></table></figure>
<p>6、关闭swap分区</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapoff <span class="regexp">/data/</span>swap</span><br><span class="line">swapoff -a &gt;<span class="regexp">/dev/</span><span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<h2 id="磁盘分区作为swap分区"><a href="#磁盘分区作为swap分区" class="headerlink" title="磁盘分区作为swap分区"></a>磁盘分区作为swap分区</h2><ol>
<li><p>以root身份进入控制台（登录系统），输入 swapoff -a  #停止所有的swap分区</p>
</li>
<li><p>用fdisk命令（例：#fdisk /dev/sdb）对磁盘进行分区，添加swap分区，新建分区，在fdisk中用“t”命令将新添的分区id改为82（Linux swap类型），最后用w将操作实际写入硬盘（没用w之前的操作是无效的）。</p>
</li>
<li><p>mkswap /dev/sdb2 #格式化swap分区，这里的sdb2要看您加完后p命令显示的实际分区设备名</p>
</li>
<li><p>swapon /dev/sdb2 #启动新的swap分区</p>
</li>
<li><p>系统启动时自动启用交换分区，可以编辑/etc/fstab，加入下面一行</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdb2 swap swap defaults <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/17/Gitlab%20%E4%B8%8EGitflow%E8%A7%84%E8%8C%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/17/Gitlab%20%E4%B8%8EGitflow%E8%A7%84%E8%8C%83/" class="post-title-link" itemprop="url">Gitlab与Gitflow规范</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-17 09:00:00" itemprop="dateCreated datePublished" datetime="2020-03-17T09:00:00+08:00">2020-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-06 20:55:19" itemprop="dateModified" datetime="2020-07-06T20:55:19+08:00">2020-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Git-flow工作流"><a href="#Git-flow工作流" class="headerlink" title="Git flow工作流"></a>Git flow工作流</h2><p>GitHub工作流十分简单，只有两个分支master 和 feature。<br>提交方式：<br>1、直接在feature分支开发，每个人在commit之前pull（git fetch + git merge）一下新的feature的代码。<br>2、有冲突一次性解决后 add. commit  push。</p>
<hr>
<p>Gitflow工作流定义了一个围绕项目发布的严格分支模型。<br>SourceTree天然支持该功能，点击Git-flow会自动化进行相关操作，最明显的变化是自动增加了一个dev分支，将新创建的develop分支推送到远端仓库。<br>开启后项目就回到了develop分支，当需要新增加功能，发布版本时，创建补丁修复bug时，分别有对应的feature,release,hotfix前缀这样的分支；当开发完成一些模块时，就可以回去master分支合并。<br><img src="/images/4-git/9-sourceTree.png"></p>
<hr>
<p>1、历史分支<br>master分支存储了正式发布的历史，而develop分支作为功能的集成分支。</p>
<p>2、功能分支（feature）<br>派生于develop用于承接具体需求开发，每个新功能位于一个自己的分支。当新功能完成时，合并回develop分支。</p>
<p>3、发布分支（release）<br>派生于develop用于完成发布准备，用于Bug修复、文档生成和其他面向发布的任务。发布完成后，应该合并到develop和master分支并打Tag。</p>
<p>4、维护分支（hotfix）<br>直接从master分支fork出来的分支，修复完成后，马上合并回master分支和develop分支。</p>
<p>跟历史分支相反，这三类分支都是短期分支，针对他们的工作内容完成后，一般都要进行删除。<br><img src="/images/4-git/10-gitflow.png"></p>
<h2 id="GitLab规范简介"><a href="#GitLab规范简介" class="headerlink" title="GitLab规范简介"></a>GitLab规范简介</h2><p>1、Gitlab定义了以下几个角色:<br>Guest - 访客<br>Reporter - 报告者; 可以理解为测试员、产品经理等，一般负责提交issue等<br>Developer - 开发者; 负责开发<br>Master - 主人; 一般是组长，负责对Master分支进行维护<br>Owner - 拥有者; 一般是项目经理</p>
<p>下表完整的列出了Guest,Reporter,Developer,Master,Owner对应的权限。<br><img src="/images/4-git/11-gitlabRights.png"></p>
<p>2、分支使用</p>
<ul>
<li>每个Git项目固定含有上述所有分支类型。主分支master和develop是保护分支，只能进行合并请求，均不可直接提交代码。</li>
<li>功能需求或常规Bug修复，请从develop拉取feature分支；线上紧急问题修复，请从master拉取hotfix分支。</li>
</ul>
<p>3、多人协作</p>
<ul>
<li>使用fork<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、项目负责人在gitlab上新建一个项目，并分享URL给开发人员</span><br><span class="line"><span class="number">2</span>、开发人员在负责人的gitlab项目页面上点击“fork”按钮，将此项目fork到自己的gitlab上，这相当于是从负责人那拷贝了一份项目副本，无论开发人员如何修改代码都不会影响负责人那master分支上的代码</span><br><span class="line"><span class="number">3</span>、然后开发人员可以根据自己的项目分工，像对待普通项目一样做clone、add、commit、push等操作</span><br><span class="line"><span class="number">4</span>、如果开发人员人为一个小模块做好了，可以点击“pull request”按钮，向负责人发送代码合并请求，要合并的代码文件也会以列表的形式同时发送给负责人，此时负责人会看到开发人员的请求，经审核如果代码没问题则会合并模块，并向开发人员发送确认合并的通知</span><br></pre></td></tr></table></figure></li>
<li>不用fork<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 关闭注册功能（管理员权限）</span><br><span class="line"><span class="number">2.</span> 管理员添加用户(给项目负责人创建组的权限)， 并给每个用户添加一个 ssh 密钥(密钥可以管理员这边生成，也可以用户自己生成发给管理员)。每个用户一个密钥对（不同的密钥在 push 等操作的时候权限是不同的,你用的哪个用户的密钥连接，你就有哪个用户的权限, ssh密钥会默认添加到 git用户的authorized_keys文件中.</span><br><span class="line"><span class="number">3.</span> 项目负责人 创建项目,  初始化项目，使项目拥有master分支，开启分支保护(master分支是没人开启的，只有项目管理人可以直接操作master分支)。给该项目添加成员分配权限(一般是开发者权限)，并且给每个成员创建一个分支。 也可以不给项目添加成员而是在创建项目的时候选择组。</span><br><span class="line"><span class="number">4.</span> 开发者克隆版本库，在自己的分支上开发，提交等操作。开发者想要将自己的分支合并到master分支，需要登录gitlab发起合并请求，负责人审核后处理合并请求. </span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>4、如何更新已经fork的代码</p>
<ul>
<li>首先要先确定一下是否建立了主repo的远程源：<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git remote -v</span></span><br></pre></td></tr></table></figure></li>
<li>如果里面只能看到你自己的两个源(fetch 和 push)，那就需要添加主repo的源：<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add upstream https:<span class="regexp">//gi</span>thub.com/被fork的仓库.git</span><br><span class="line">git remote -v <span class="regexp">//</span>能看到upstream了</span><br></pre></td></tr></table></figure></li>
<li>fetch源分支的新版本到本地<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git fetch upstream</span></span><br></pre></td></tr></table></figure></li>
<li>合并本地两个版本的代码：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">merge</span> upstream/<span class="keyword">master</span></span><br></pre></td></tr></table></figure></li>
<li>将在本地合并后的代码push到自己的github上去，以更新github上fork的仓库<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> git fetch origin namedev_branch:namedev_branch</span><br><span class="line"><span class="regexp">//</span> 拉取远程的一个叫namedev_branch的分支，并在本地创建一个叫namedev_branch的分支和远程的分支匹配</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="问题汇总"><a href="#问题汇总" class="headerlink" title="问题汇总"></a>问题汇总</h2><h3 id="合并场景"><a href="#合并场景" class="headerlink" title="合并场景"></a>合并场景</h3><ul>
<li><p>手动合并：<br>1、文件合并（修改同一文件的同一区域）<br>2、树冲突(不同成员对同一文件重命名)</p>
</li>
<li><p>智能合并：<br>1、多成员修改不同文件<br>2、多成员修改相同文件不同区域</p>
</li>
</ul>
<h3 id="远程与本地冲突解决"><a href="#远程与本地冲突解决" class="headerlink" title="远程与本地冲突解决"></a>远程与本地冲突解决</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="keyword">master</span>   <span class="title">--&gt;双击本地master</span>分支，切换过程需要等一小会</span><br><span class="line">git fetch origin   --&gt;点击获取（fetch）按钮，这时候拉取（pull）按钮就会提示有多少更新</span><br><span class="line">git merge origin/<span class="keyword">master</span>  <span class="title">--&gt;这一步换成（pull</span>）按钮操作，拉取更新到本地，此时需保证本地dev的更新都已经提交</span><br><span class="line">git checkout dev  --&gt;双击本地dev开发分支</span><br><span class="line">git merge <span class="keyword">master</span>  <span class="title">--&gt;在本地dev</span>分支单击右键，选择将本地<span class="literal">master</span>分支合并到当前分支</span><br></pre></td></tr></table></figure>

<h3 id="误在主分支开发"><a href="#误在主分支开发" class="headerlink" title="误在主分支开发"></a>误在主分支开发</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash  <span class="regexp">//</span>在主分支使用该命令，保存正在进行的操作，恢复master分支的状态</span><br><span class="line">git checkout dev  <span class="regexp">//</span>切换到自己的本地开发分支</span><br><span class="line">git stash pop  <span class="regexp">//</span>释放暂存的工作到当前分支</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d46da933c180">推荐文章</a>()</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/16/Git%20%E7%95%8C%E9%9D%A2%E5%8C%96%E6%93%8D%E4%BD%9C-sourceTree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/Git%20%E7%95%8C%E9%9D%A2%E5%8C%96%E6%93%8D%E4%BD%9C-sourceTree/" class="post-title-link" itemprop="url">Git 界面化操作-sourceTree</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-16 10:00:00" itemprop="dateCreated datePublished" datetime="2020-03-16T10:00:00+08:00">2020-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-23 16:34:29" itemprop="dateModified" datetime="2020-04-23T16:34:29+08:00">2020-04-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="sourceTree实例演示"><a href="#sourceTree实例演示" class="headerlink" title="sourceTree实例演示"></a>sourceTree实例演示</h2><p>1、构造冲突<br>（1）修改了某文件某行内容并且提交推送到远程库上；<br>（2）另一个工作目录下也修改该文件该行内容，并且也要推送到远程库上去。<br>推送的时候出现如下问题：提示远程已经有更新了，本地版本太低，让我们先pull拉取最新的代码然后再次推送。</p>
<p>2、解决冲突<br> (1)在本地副本的已暂存文件 —-&gt; 右键 —-&gt; 解决冲突 —-&gt; 打开外部合并工具。<br> (2)接着关闭Beynod Compare工具，冲突感叹号没有了，并且会有一个 .orig 的文件生成。<br> (3)接着选中.orig文件，单击右键 —-&gt; 移除。</p>
<p><img src="/images/4-git/5-solveconflict.png"></p>
<p><strong>补充说明</strong>：<br>当清理文件并得到最终代码后，剩下的工作就是将这个结果保存起来，并且马上退出这个合并工具，Git 会在后台对那个文件自动地执行 “git add” 命令，这也标志着冲突已经解决了。<br>如果你不使用合并工具，而是手动在文本编辑器中清理这些冲突，你必须手动地将文件标记为已解决状态（通过执行命令 “git add filename”）。<br>最终，当所有的冲突被解决后，你必须通过一个正常的提交操作来完成这个清理合并冲突的工作。</p>
<h2 id="Beyond-Compare"><a href="#Beyond-Compare" class="headerlink" title="Beyond Compare"></a>Beyond Compare</h2><p>1、注册码</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">w4G</span>-in<span class="number">5</span>u<span class="number">3</span>SH<span class="number">75</span>RoB<span class="number">3</span>VZIX<span class="number">8</span>htiZgw<span class="number">4</span>ELilwvPcHAIQWfwfXv<span class="number">5</span>n<span class="number">0</span>IHDp<span class="number">5</span>hv</span><br><span class="line"><span class="attribute">1BM3</span>+H<span class="number">1</span>XygMtiE<span class="number">0</span>-JBgacjE<span class="number">9</span>tz<span class="number">33</span>sIh<span class="number">542</span>EmsGs<span class="number">1</span>yg<span class="number">638</span>UxVfmWqNLqu-</span><br><span class="line"><span class="attribute">Zw91XxNEiZF7DC7</span>-iV<span class="number">1</span>XbSfsgxI<span class="number">8</span>Tvqr-ZMTxlGCJU+<span class="number">2</span>YLveAc-YXs<span class="number">8</span>ci</span><br><span class="line"><span class="attribute">RTtssts7leEbJ979H5v</span>+G<span class="number">0</span>sw-FwP<span class="number">9</span>bjvE<span class="number">4</span>GCJ<span class="number">8</span>oj+jtlp<span class="number">7</span>wFmpVdzovEh</span><br><span class="line"><span class="attribute">v5Vg3dMqhqTiQHKfmHjYbb0o5OUxq0jOWxg5NKim9dhCVF</span>+avO<span class="number">6</span>mDeRNc</span><br><span class="line"><span class="attribute">OYpl7BatIcd6tsiwdhHKRnyGshyVEjSgRCRY11IgyvdRPnbW8UOVULuTE</span></span><br></pre></td></tr></table></figure>
<p>2、永久使用需删除该目录文件</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="tag">\<span class="name">Users</span></span><span class="tag">\<span class="name">*</span></span>**<span class="tag">\<span class="name">AppData</span></span><span class="tag">\<span class="name">Roaming</span></span><span class="tag">\<span class="name">Scooter</span></span> Software<span class="tag">\<span class="name">Beyond</span></span> Compare 4</span><br></pre></td></tr></table></figure>

<h2 id="Git配置difftool和mergetool"><a href="#Git配置difftool和mergetool" class="headerlink" title="Git配置difftool和mergetool"></a>Git配置difftool和mergetool</h2><p>1、命令行配置</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#difftool 配置</span></span><br><span class="line">git<span class="built_in"> config </span>--global diff.tool bc4</span><br><span class="line">git<span class="built_in"> config </span>--global difftool.bc4.cmd <span class="string">&quot;\&quot;c:/program files (x86)/beyond compare 4/bcomp.exe\&quot; \&quot;<span class="variable">$LOCAL</span>\&quot; \&quot;<span class="variable">$REMOTE</span>\&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#mergeftool 配置</span></span><br><span class="line">git<span class="built_in"> config </span>--global merge.tool bc4</span><br><span class="line">git<span class="built_in"> config </span>--global mergetool.bc4.cmd  <span class="string">&quot;\&quot;c:/program files (x86)/beyond compare 4/bcomp.exe\&quot; \&quot;<span class="variable">$LOCAL</span>\&quot; \&quot;<span class="variable">$REMOTE</span>\&quot; \&quot;<span class="variable">$BASE</span>\&quot; \&quot;<span class="variable">$MERGED</span>\&quot;&quot;</span></span><br><span class="line">git<span class="built_in"> config </span>--global mergetool.bc4.trustExitCode <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#让git mergetool不再生成备份文件（*.orig）</span></span><br><span class="line">git<span class="built_in"> config </span>--global mergetool.keepBackup <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>2、文件配置<br><img src="/images/4-git/6-gitconfig.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/16/Git-Rebase%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/Git-Rebase%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%20/" class="post-title-link" itemprop="url">Git-Rebase彻底搞懂</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-16 10:00:00" itemprop="dateCreated datePublished" datetime="2020-03-16T10:00:00+08:00">2020-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-23 15:40:50" itemprop="dateModified" datetime="2020-04-23T15:40:50+08:00">2020-04-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="rebase原理"><a href="#rebase原理" class="headerlink" title="rebase原理"></a>rebase原理</h2><p>先找到两个分支最近的共同祖先，根据当前分支的提交历史生成一系列补丁文件，然后以基底分支最后一个提交为新的提交起始点，应用之前生成的补丁文件，最后形成一个新的合并提交。</p>
<h2 id="Merge和Rebase"><a href="#Merge和Rebase" class="headerlink" title="Merge和Rebase"></a>Merge和Rebase</h2><p>1、把A分支基于B分支做rebase，以便把B分支合入到A分支</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase B分支 <span class="keyword">A</span>分支</span><br></pre></td></tr></table></figure>

<p>2、图解<br><img src="/images/4-git/7-Merge&Rebase.png" alt="对比图"></p>
<p>3、区别</p>
<ul>
<li>git merge是将两个分支做一个三方合并(如果不是直接上游分支)</li>
<li>git rebase则会将当前分支相对于基底分支的所有提交生成一系列补丁，然后放到基底分支的顶端，从而使得提交记录变成一条直线</li>
</ul>
<p>4、git rebase –continue/abort/skip分别表示:继续执行变基操作、终止变基、跳过某一文件继续进行。</p>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p><strong>一、分支合并</strong><br>假设当前本地仓库提交历史如下，且处于topic分支:</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">A</span> <span class="comment">topic</span></span><br><span class="line"><span class="comment"></span>    <span class="comment">/</span></span><br><span class="line"><span class="comment">D</span>--<span class="literal">-</span><span class="comment">E</span>--<span class="literal">-</span><span class="comment">F</span> <span class="comment">master</span></span><br></pre></td></tr></table></figure>
<p>1、git rebase将两个分支的提交合并到master分支的顶端</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase <span class="literal">master</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ git rebase <span class="keyword">master</span> <span class="title">topic</span></span><br></pre></td></tr></table></figure>
<p>此时，提交历史将变为：</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">		A&#x27;</span> <span class="comment">topic</span></span><br><span class="line"><span class="comment">		/</span></span><br><span class="line"><span class="comment">D</span>--<span class="literal">-</span><span class="comment">E</span>--<span class="literal">-</span><span class="comment">F</span> <span class="comment">master</span></span><br></pre></td></tr></table></figure>

<p>2、原理解析</p>
<ul>
<li>git 会把 topic 分支里面的每个 commit 取消掉，把上面的操作临时保存成 patch 文件，存在 .git/rebase 目录下；</li>
<li>然后，把 topic 分支更新到最新的 master 分支；</li>
<li>最后，把上面保存的 patch 文件应用到 topic 分支上；</li>
</ul>
<p>3、在 rebase 的过程中，也许会出现冲突 conflict，在这种情况，git 会停止 rebase 并会让你去解决冲突。在解决完冲突后，用 git add 命令去更新这些内容。</p>
<p>4、git rebase –continue 继续应用余下的 patch 补丁文件。</p>
<p><strong>二、合并提交纪录</strong><br><code>git rebase -i &lt;commitid&gt;</code>可以进行交互式变基，<br>git会将<code>&lt;commitid&gt;-HEAD</code>之间的提交列在一个变基脚本中，<br>每笔提交根据用户设置的命令，会进行不同的操作，如修改提交信息、移除指定提交、合并两个提交为一个(压缩提交)、拆分提交等。</p>
<p>1、合并最近的2次提交记录</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> rebase -i HEAD~<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">commit</span> <span class="number">2</span>d<span class="number">7</span>b<span class="number">923</span>ab<span class="number">1</span>d<span class="number">86</span>b<span class="number">1</span>fa<span class="number">26</span>ae<span class="number">6495</span>c<span class="number">35</span>f<span class="number">8</span>d<span class="number">2</span>ecdfff<span class="number">76</span> (HEAD -&gt; dev)</span><br><span class="line"><span class="attribute">Author</span>: “leolin<span class="number">9527</span> &lt;“<span class="number">963522074</span>@qq.com&gt;</span><br><span class="line"><span class="attribute">Date</span>:   Wed Apr <span class="number">8</span> <span class="number">21</span>:<span class="number">27</span>:<span class="number">09</span> <span class="number">2020</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">modify</span> bbb</span><br><span class="line"></span><br><span class="line"><span class="attribute">commit</span> <span class="number">090</span>d<span class="number">87337</span>cf<span class="number">59</span>a<span class="number">4</span>b<span class="number">185241</span>f<span class="number">71</span>d<span class="number">7</span>d<span class="number">69</span>f<span class="number">2</span>f<span class="number">26</span>ee<span class="number">443</span></span><br><span class="line"><span class="attribute">Author</span>: “leolin<span class="number">9527</span> &lt;“<span class="number">963522074</span>@qq.com&gt;</span><br><span class="line"><span class="attribute">Date</span>:   Wed Apr <span class="number">8</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">59</span> <span class="number">2020</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">create</span> aaa</span><br></pre></td></tr></table></figure>
<p>2、会自动进入 vim 编辑模式</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pick 090d873 create aaa</span><br><span class="line">pick 2d7b923 modify bbb</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase 510aed3..2d7b923 onto 510aed3 (2 commands)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick &lt;commit&gt; = use commit</span></span><br><span class="line"><span class="comment"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit &lt;commit&gt; = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup &lt;commit&gt; = like &quot;squash&quot;, but discard this commit&#x27;s log message</span></span><br><span class="line"><span class="comment"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># d, drop &lt;commit&gt; = remove commit</span></span><br><span class="line"><span class="comment"># l, label &lt;label&gt; = label current HEAD with a name</span></span><br><span class="line"><span class="comment"># t, reset &lt;label&gt; = reset HEAD to a label</span></span><br><span class="line"><span class="comment"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br></pre></td></tr></table></figure>
<p>3、进行如下修改，保留第一行的 pick，剩余提交替换为 squash 或 s，保存退出编辑</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pick 090d873 create aaa</span><br><span class="line">s 2d7b923 modify bbb</span><br></pre></td></tr></table></figure>
<p>4、若意外退出编辑，执行下列命令</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rebase <span class="comment">--edit-todo</span></span><br><span class="line">git rebase <span class="comment">--continue</span></span><br></pre></td></tr></table></figure>
<p>5、git log进行日志查看</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">commit</span> <span class="number">81025</span>adc<span class="number">715</span>f<span class="number">1</span>ac<span class="number">26</span>e<span class="number">17145840</span>a<span class="number">2</span>ba<span class="number">02</span>a<span class="number">74</span>d<span class="number">129</span>c (HEAD -&gt; dev)</span><br><span class="line"><span class="attribute">Author</span>: “leolin<span class="number">9527</span> &lt;“<span class="number">963522074</span>@qq.com&gt;</span><br><span class="line"><span class="attribute">Date</span>:   Wed Apr <span class="number">8</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">59</span> <span class="number">2020</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">create</span> aaa</span><br><span class="line"></span><br><span class="line">    <span class="attribute">modify</span> bbb</span><br></pre></td></tr></table></figure>

<h2 id="温馨提示"><a href="#温馨提示" class="headerlink" title="温馨提示"></a>温馨提示</h2><p>本地提交前，最好把基准点设为需要合并的分支，这样提交 PR/MR 的时侯就不会冲突(本地来解决冲突)，不要在公共分支上变基！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/16/Git%20fetch%20%E5%92%8C%20Git%20pull%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/Git%20fetch%20%E5%92%8C%20Git%20pull%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">Git fetch和Git pull区别</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-16 09:00:00" itemprop="dateCreated datePublished" datetime="2020-03-16T09:00:00+08:00">2020-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-23 15:44:21" itemprop="dateModified" datetime="2020-04-23T15:44:21+08:00">2020-04-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>远程版本库</strong>：<br>与本地仓库概念基本一致，不同之处在于一个存在远程，可用于远程协作，一个却是存在于本地。通过push/pull可实现本地与远程的交互；<br><strong>远程仓库副本</strong>：<br>可以理解为存在于本地的远程仓库缓存，如需更新，可通过git fetch/pull命令获取远程仓库内容。<br>用fetch时，并未合并到本地仓库，此时可用git merge实现远程仓库副本与本地仓库的合并。<br>git pull 根据配置的不同，可为git fetch + git merge 或 git fetch + git rebase。<br><img src="/images/4-git/2-remote.png" alt="取自知乎"></p>
<h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p>1、./.git/config文件，存储了本地库相关信息，如下图所示：<br><img src="/images/4-git/3-config.png" alt="配置"><br>2、./.git/refs 里面有三个文件夹：heads、remotes、tags。<br>3、head则是本地仓库与分支信息。<br>4、remotes文件夹中的每一个文件夹代表一个远程库名称（git remote），其中的每个文件关联远程库的一个分支，其中保存该分支的最新commit id。</p>
<h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p>1、将代码提交到github，可查看本地仓库和远端仓库commitID都为f5e7f32dc234b1d423f29cc08cb5b0ba9c3784c3。<br>2、直接在github修改并提交，可发现远端的commitID变为26156c341215c2c1fbf6af7689c73ab422ecc2c9。<br>3、同时在本地同一处做不同的修改并提交本地库，可见本地ID为11b61c9bf126efce2852e86a0969fbf02b8d7abd，远端副本仍是f5e7f32dc234b1d423f29cc08cb5b0ba9c3784c3。<br>4、此时采用<strong>git pull</strong>，远程仓库副本的ID更新为26156…，自动合并失败，手动解决冲突后，提交代码，新ID为3b46…<br>5、远端修改后用<strong>git pull</strong>，此时所有commitID皆为d36ecc5，同时文件得到更新。<br>6、远端修改后用<strong>git fetch</strong>，此时远端副本ID得到更新，但本地ID和文件并未更新。<br>7、git fetch更安全也更符合实际要求，可以在merge前查看更新情况，根据实际情况再决定是否合并。</p>
<h2 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">$ git fetch origin <span class="keyword">master</span>                <span class="title">#从远程的origin</span>仓库的<span class="literal">master</span>分支下载代码到本地的origin maste</span><br><span class="line">$ git log -p <span class="literal">master</span>.. origin/<span class="keyword">master</span>      <span class="title">#比较本地的仓库和远程参考的区别</span></span><br><span class="line"><span class="title">$</span> git merge origin/<span class="keyword">master</span>                <span class="title">#把远程下载下来的代码合并到本地仓库，远程的和本地的合并</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="variable">$</span> git fetch origin master:temp           <span class="comment">#从远程的origin仓库的master分支下载到本地并新建一个分支temp</span></span><br><span class="line"><span class="variable">$</span> git <span class="built_in">diff</span> temp                          <span class="comment">#比较master分支和temp分支的不同</span></span><br><span class="line"><span class="variable">$</span> git merge temp                         <span class="comment">#合并temp分支到master分支</span></span><br><span class="line"><span class="variable">$</span> git branch <span class="literal">-d</span> temp                     <span class="comment">#删除temp</span></span><br></pre></td></tr></table></figure>

<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>由此可见，git pull看起来像git fetch+get merge，但是根据commit ID来看的话，实现原理是不一样的。<br><img src="/images/4-git/4-conclusion.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/15/Git%20%E5%91%BD%E4%BB%A4%E5%88%86%E7%B1%BB%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/15/Git%20%E5%91%BD%E4%BB%A4%E5%88%86%E7%B1%BB%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Git命令分类总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-15 09:00:00" itemprop="dateCreated datePublished" datetime="2020-03-15T09:00:00+08:00">2020-03-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-23 16:33:03" itemprop="dateModified" datetime="2020-04-23T16:33:03+08:00">2020-04-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">运维笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>1、什么是Git？<br>Workspace：工作区<br>Index / Stage：暂存区<br>Repository：仓库区（或本地仓库）<br>Remote：远程仓库<br><img src="/images/4-git/1-concept.png"></p>
<p>2、SVN与Git<br><strong>SVN</strong>是集中式版本控制系统，版本库是集中放在中央服务器的，而干活的时候，用的都是自己的电脑，所以首先要从中央服务器哪里得到最新的版本，然后干活，干完后，需要把自己做完的活推送到中央服务器。<br>集中式版本控制系统是必须联网才能工作，如果在局域网还可以，带宽够大，速度够快，如果在互联网下，如果网速慢的话，就纳闷了。</p>
<p><strong>Git</strong>是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库。<br>既然每个人的电脑都有一个完整的版本库，那多个人如何协作呢？<br>比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。</p>
<p>3、工作区、暂存区、本地仓库<br><strong>工作区</strong>：本地工作目录。工作区的内容会包含提交到暂存区和版本库(当前提交点)的内容，同时也包含自己的修改内容。<br><strong>版本库</strong>：执行git commit命令后，会将暂存区内容提交到仓库之中。在工作区下面有.git的目录，这个目录下的内容不属于工作区，里面便是仓库的数据信息，暂存区相关内容也在其中。这里也可以使用merge或rebase将远程仓库副本合并到本地仓库。<br><strong>暂存区</strong>：里面有个index文件，存储着关于暂存区的内容，同时Git为我们自动创建了第一个分支master，以及指向master的一个指针HEAD。</p>
<h2 id="Git-配置"><a href="#Git-配置" class="headerlink" title="Git 配置"></a>Git 配置</h2><p>1、配置全局账户，也就是该账户对所有的 Git 仓库都有效</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">&#x27;你的账户名称&#x27;</span></span><br><span class="line">git<span class="built_in"> config </span>--global user.email <span class="string">&#x27;你的 Email&#x27;</span></span><br></pre></td></tr></table></figure>
<p>2、配置局部账户，也就是该账户只对当前 Git 仓库有效</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--local user.name <span class="string">&#x27;你的账户名称&#x27;</span> </span><br><span class="line">git<span class="built_in"> config </span>--local user.email <span class="string">&#x27;你的 Email&#x27;</span></span><br></pre></td></tr></table></figure>
<p>3、配置查看</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global --list</span><br><span class="line">git<span class="built_in"> config </span>--local --list</span><br></pre></td></tr></table></figure>
<p>4、配置代理<br><strong>Https</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 配置</span></span><br><span class="line">git<span class="built_in"> config </span>--global http.proxy <span class="string">&#x27;socks5://127.0.0.1:1080&#x27;</span> </span><br><span class="line">git<span class="built_in"> config </span>--global https.proxy <span class="string">&#x27;socks5://127.0.0.1:1080&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 取消</span></span><br><span class="line">git<span class="built_in"> config </span>--global --unset http.proxy</span><br><span class="line">git<span class="built_in"> config </span>--global --unset https.proxy</span><br></pre></td></tr></table></figure>
<p><strong>SSH</strong><br>需要在~/.ssh目录中创建config文件，写入下述代码。</p>
<ul>
<li><p>win10</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User git</span><br><span class="line">ProxyCommand connect -S 127.0.0.1:1080 %h %p</span><br></pre></td></tr></table></figure>
</li>
<li><p>Linux</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User git</span><br><span class="line">ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>1、创建版本库</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git init</span></span><br></pre></td></tr></table></figure>
<p>2、添加文件到暂存区</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span><span class="bash"> -A  提交所有变化</span></span><br><span class="line">git <span class="keyword">add</span><span class="bash"> -u  提交被修改(modified)和被删除(deleted)文件，不包括新文件(new)</span></span><br><span class="line">git <span class="keyword">add</span><span class="bash"> .  提交新文件(new)和被修改(modified)文件，不包括被删除(deleted)文件</span></span><br><span class="line">git <span class="keyword">add</span><span class="bash"> &lt;file&gt; . 提交指定文件</span></span><br></pre></td></tr></table></figure>
<p>3、提交文件到仓库</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> commit -m <span class="string">&quot;内容&quot;</span></span><br></pre></td></tr></table></figure>
<p>4、查看当前仓库状态</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">git ls-<span class="built_in">files</span> <span class="comment">--others 查看哪些文件没有被 Git 管控</span></span><br></pre></td></tr></table></figure>
<p>5、文件差异比较</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">diff </span>&lt;file&gt;  比较某文件工作区和暂存区的差异</span><br><span class="line">git <span class="keyword">diff </span>--<span class="keyword">cache </span>&lt;file&gt;  比较某文件暂存区和 HEAD 的差异</span><br></pre></td></tr></table></figure>
<p>6、查看提交日志</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> </span><br><span class="line">git <span class="built_in">log</span> <span class="comment">--pretty=oneline  简要显示信息</span></span><br></pre></td></tr></table></figure>

<p>7、删除已添加到暂存区的文件</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rm</span> &lt;<span class="keyword">file</span>&gt; 在文件管理器中直接删除</span><br><span class="line">git <span class="keyword">rm</span> &lt;<span class="keyword">file</span>&gt; 到版本库中进行移除</span><br></pre></td></tr></table></figure>

<p>8、暂存区与工作区间回滚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="comment">-- &lt;file&gt;  丢弃工作区的修改</span></span><br></pre></td></tr></table></figure>
<p>9、版本回退(暂存区和工作区所有文件恢复到某个版本)<br>HEAD表示当前版本，上个版本就是HEAD^，上上个就是HEAD^^，再上可以使用简便方法，比如上三个版本HEAD~3</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD^</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard 版本号</span></span><br></pre></td></tr></table></figure>
<p>10、查看历史版本号</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">ref</span>log</span><br></pre></td></tr></table></figure>
<p>11、打标签</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">tag</span> <span class="title">标签名 commit</span> 的id  </span><br></pre></td></tr></table></figure>

<h2 id="远端仓库"><a href="#远端仓库" class="headerlink" title="远端仓库"></a>远端仓库</h2><p>1、本地与远程库的关联和取消</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="builtin-name">add</span> url地址</span><br><span class="line">git remote <span class="builtin-name">remove</span> remote的名称</span><br></pre></td></tr></table></figure>
<p>2、列出所有remote</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git remote -v</span></span><br></pre></td></tr></table></figure>
<p>3、把远端所有分支和标签的变更都拉到本地</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git fetch remote</span></span><br></pre></td></tr></table></figure>
<p>4、把远端分支的变更拉倒本地且merge到本地分支</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull <span class="tag">&lt;<span class="name">远程主机名</span>&gt;</span> <span class="tag">&lt;<span class="name">远程分支名</span>&gt;</span>:<span class="tag">&lt;<span class="name">本地分支名</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注</strong>：若将冒号和后面的本地分支名去掉，则表示将远程origin仓库的master分支拉取下来与本地当前分支合并。<br>5、把本地分支 push 到远端</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">push</span> remote名称 分支名</span><br></pre></td></tr></table></figure>

<h2 id="分支与标签"><a href="#分支与标签" class="headerlink" title="分支与标签"></a>分支与标签</h2><p>1、创建分支并且切换到该分支</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">git</span> <span class="string">checkout -b 新分支</span></span><br><span class="line"></span><br><span class="line"><span class="attr">相当于：</span></span><br><span class="line"><span class="attr">git</span> <span class="string">branch 新分支</span></span><br><span class="line"><span class="attr">git</span> <span class="string">checkout 新分支</span></span><br></pre></td></tr></table></figure>
<p>2、列出本地分支</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git branch -v</span></span><br></pre></td></tr></table></figure>
<p>3、列出远端所有分支</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git branch -rv</span></span><br></pre></td></tr></table></figure>
<p>4、安全删除本地分支</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">branch </span>-d 要删除的分支</span><br></pre></td></tr></table></figure>
<p>5、合并分支，且为 merge 创建 commit</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">merge</span> A分支  <span class="comment">-- 把 A 分支合入到当前分支</span></span><br><span class="line">git <span class="keyword">merge</span> A分支 B分支  <span class="comment">--把A分支合入B分支</span></span><br></pre></td></tr></table></figure>

<h2 id="bug分支（临时任务）"><a href="#bug分支（临时任务）" class="headerlink" title="bug分支（临时任务）"></a>bug分支（临时任务）</h2><p>假设场景：在dev分支开发时，因任务未完成无法提交，又接到处理404的任务<br>1、把未处理完的变更先保存到 stash 中，保证工作区干净</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git stash</span></span><br></pre></td></tr></table></figure>
<p>2、在mater分支上创建临时分支404</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> checkout -b <span class="string">&#x27;404&#x27;</span></span><br></pre></td></tr></table></figure>
<p>3、处理完成后，切换到master分支，开始合并，再删除临时分支</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="literal">master</span></span><br><span class="line">git merge --no-ff -m <span class="string">&quot;fix 404&quot;</span> <span class="number">404</span></span><br><span class="line">git branch -d <span class="number">404</span></span><br></pre></td></tr></table></figure>
<p>4、切换到dev分支，查看工作现场</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">git</span> <span class="string">checkout dev</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash list</span></span><br></pre></td></tr></table></figure>
<p>5、恢复工作现场</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash pop <span class="regexp">//</span> pop 相当于栈的出栈和入栈一样</span><br><span class="line">或者</span><br><span class="line">git stash apply <span class="regexp">//</span> apply 相当于从栈顶把任务取出来，但是不从栈中把任务移除</span><br></pre></td></tr></table></figure>
<p>6、代码回滚<br>一般用于master的代码回滚，因为多人在上面协作，revert 可以平稳的回滚代码，但却保留提交记录，不会让协作的人各种冲突</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert <span class="keyword">commit</span>-<span class="keyword">sha1</span></span><br></pre></td></tr></table></figure>

<h2 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h2><p>1、本地分支合并冲突<br>Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容，其中&lt;&lt;&lt;HEAD是指主分支修改的内容，&gt;&gt;&gt;&gt;&gt;demo 是指demo分支上修改的内容。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">99999</span><br><span class="line">=======</span><br><span class="line">88888</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; demo</span><br></pre></td></tr></table></figure>
<p>解决：查看内容，修改为主干部分，进行提交。</p>
<h2 id="补充内容"><a href="#补充内容" class="headerlink" title="补充内容"></a>补充内容</h2><p>1、git bash修改默认编辑器nano为notepad++.exe</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global core.editor <span class="string">&quot;&#x27;D:\Notepad++\notepad++.exe&#x27; -multiInst -notabbar -nosession -noPlugin &#x27;$*&#x27;&quot;</span></span><br></pre></td></tr></table></figure>
<p>再输入命令git commit 便可成功开启Notepad++编辑器。<br>2、错误:Updates were rejected because the remote contains work that you do<br>其他地方向同一远端库推送了代码，导致本地不是最新的，需要先pull远端。</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin <span class="literal">master</span></span><br></pre></td></tr></table></figure>
<p>3、错误:fatal: refusing to merge unrelated histories<br>Github新建仓库，添加了License等文件，然后上传本地仓库会发现github的仓库和本地没有一个共同的commit导致无法提交。<br>要把两个不同的项目合并，git需要添加–allow-unrelated-histories 允许不相关历史合并。</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin <span class="keyword">master</span> <span class="title">--allow-unrelated-histories</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/10/%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%E6%98%AF%E5%90%A6%E6%98%AF%E5%9B%9E%E6%96%87%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Leo Lin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="江湖の林九">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/10/%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%E6%98%AF%E5%90%A6%E6%98%AF%E5%9B%9E%E6%96%87%E6%95%B0/" class="post-title-link" itemprop="url">判断回文数(Python)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-10 09:00:00" itemprop="dateCreated datePublished" datetime="2020-03-10T09:00:00+08:00">2020-03-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-11 22:27:51" itemprop="dateModified" datetime="2020-04-11T22:27:51+08:00">2020-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%B6%B3%E8%BF%B9/" itemprop="url" rel="index"><span itemprop="name">编程足迹</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</p>
<p>示例 1:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">输入:</span> <span class="number">121</span></span><br><span class="line"><span class="string">输出:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>代码实现:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">judge_num1</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    方法一</span></span><br><span class="line"><span class="string">    :param x:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    str_x = str(x)</span><br><span class="line">    <span class="keyword">return</span> str_x == str_x[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">judge_num2</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    方法二</span></span><br><span class="line"><span class="string">    :param x:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> x &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    temp_x = x</span><br><span class="line">    palindromeNum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> temp_x != <span class="number">0</span>:</span><br><span class="line">        palindromeNum = palindromeNum * <span class="number">10</span> + temp_x % <span class="number">10</span></span><br><span class="line">        temp_x //= <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> palindromeNum == x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    result = judge_num1(<span class="number">1221</span>)</span><br><span class="line">    print(result)</span><br><span class="line">    result2 = judge_num2(<span class="number">1221</span>)</span><br><span class="line">    print(result2)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Leo Lin"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Leo Lin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">104</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leo Lin</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
